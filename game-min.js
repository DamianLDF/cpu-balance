const FPS=30,BTNW=100,BTNH=50;let ctx,fl,sk,cp,pl,l1=["00000","00P00","00000","010A0","00000"],l2=["00000","002A0","0P000","001B0","00000"],l3=["00P00","01010","00000","00B00","00000"],l4=["0P000","00100","0-0-0","0-K-0","00000"],l5=["0000000","P111AAA","-00","-00"],l6=["00P00","0-1-0","01C10","0-1-0","00000"],l7=["--C","02A20","0-K-0","0-2-0","01B10","0-2-0","00P00"],l8=["000P000","0321230","01-C-10","02C-C20","01-C-10","0311130","0000000"],lr2=["-00P00","0123210","02-D-20","03C-D30","02-D-20","0123210","-00000"],l9=["--000","0111110","0111110","011P110","---0","---0","0000000","0000000","0-0-0-0","A-C-C-A"],lx=["-------C","003000C0C","00-----0","-2-0000000","0020-0-3-0","0000000000","-0-0-0-P-0","0000000000"],lx2=["-----G","12106212123","11212124222","12121212121","21212121112","12121222222","21212131212","00000P00000"],lx3=["----D","411221212","211212222","212121212","221112111","212122222","0000P0000"],test_lvl=["------------","P00000000000","0123456789X0","000000000000","0123456789X0","0000---00000","0ABCDEFGHIJ0","000000000000","-----0------","------------"],endlvl=["0000000G00000000","0101011110100100","0111010010100100","0010010010100100","0010011110111100","0000000P00000000","0101010111010010","0101010101011010","0101010101011110","0110110111010110","0000000000000000"],lvls=[l1,l2,l3,l4,l5,l6,lr2,l7,lx3,l8,l9,lx,lx2,endlvl],ln=0,cpu_merge={1:"2",2:"3",3:"4",4:"5",5:"6",6:"7",7:"8",8:"9",9:"X",X:"X"},cpu_nrg={1:["A"],2:["B","A"],3:["C","B","A"],4:["D","C","B","A"],5:["E","D","C","B","A"],6:["F","E","D","C","B","A"],7:["G","F","E","D","C","B","A"],8:["H","G","F","E","D","C","B","A"],9:["I","H","G","F","E","D","C","B","A"],X:["J","I","H","G","F","E","D","C","B","A"]},kb={},msg={},game={},logo=new Image,logo_src="data:image/png;base64,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",ok_snd=new Audio("data:audio/x-wav;base64,UklGRsYBAABXQVZFZm10IBAAAAABAAEAiBUAAIgVAAABAAgAZGF0YaIBAABvi5V5aICXhGp1kY90bIaWfml7lIlucYySeWqBloNrd5GNc26HlH1qfZSHbnOMkHhsgpSBbHmQi3Nwh5J8bH6ThW91jI53boOTgG16kIlzcoiQe21/koRvd4yMd3CEkX9ufI+Hc3SIj3tvgJCDcHiMindxhJB+b32PhnN1iI16cIGPgnF6jIl2c4WOfnB+joVzd4mLenKCjoFxe4yHdnWFjX1yf42DdHiJinpzgo2AcnyLhnZ2hot8c4CMgnR6iYh5dYOLf3N9ioV3eIaKfHSAi4F1e4iHeXaDin91foqDd3mGiHx2gYqBdnyIhXp4g4l+dn+Jg3h6hYd8d4GJgHd9h4R6eYOHfnd/iIJ4e4WFfHiDgniChXl/hnx8hn96hIJ5gYV6foZ9e4WAeoOCeoCEe36FfnuEgHqCg3uAhHx9hH58g4F7gYN7f4R9fYR/fIKBfIGDfH+Dfn2DgHyCgXyAgn1/g359goB9gYF9gIJ+foJ/foGAfYCBfn+Bfn+Bf36BgH6AgX5/gX9/gX9/gIB/gIB/f4B/f4CAf4CAf4CAf3+A"),no_snd=new Audio("data:audio/x-wav;base64,UklGRhQBAABXQVZFZm10IBAAAAABAAEAiBUAAIgVAAABAAgAZGF0YfAAAACJiYmJiYmJiYmJgXZ2dnZ2dnZ2dnZ4iYmJiYmJiYmJiYl3dnZ2dnZ2dnZ2dnaHiYmJiYmJiYmJiYl4dnZ2dnZ2dnd3d3d4iIiIiIiIiIiIiIiIg3d3eHh4eHh4eHh4eHh/h4eHh4eHhoaGhoaGhnx5eXl5eXl5eXl5eXl6eoOFhYWFhYWFhYWFhYWFhHp6ent7e3t7e3t7e3t7e3uChISEhISDg4ODg4ODg4ODfnx8fHx8fHx8fH19fX19fX19goKCgoKCgoKCgoKBgYGBgYGAfn5+fn5+fn5+fn5+fn9/f39/f4CAgICAgICAgICAgIA="),lvl={};function key_down(l){switch_key(l,!0)}function key_up(l){switch_key(l,!1)}function switch_key(l,t){switch(l.which){case 87:case 38:l.preventDefault(),kb.u=t;break;case 68:case 39:l.preventDefault(),kb.r=t;break;case 83:case 40:l.preventDefault(),kb.d=t;break;case 65:case 37:l.preventDefault(),kb.l=t;break;case 82:case 8:l.preventDefault(),kb.rst=t;break;case 32:case 13:l.preventDefault(),kb.menu=t;break;case 78:l.preventDefault(),kb.skipNext=t;break;case 80:l.preventDefault(),kb.skipPrev=t;break}}function page_load(){let l=document.getElementById("cnv");ctx=l.getContext("2d"),document.addEventListener("keydown",key_down,!1),document.addEventListener("keyup",key_up,!1),game.in_menu=!0,game.menu=[{text:"PLAY",x:350,y:400}];setInterval(process,1e3/30);load_level(lvls[ln]),logo.src=logo_src,music_start()}function music_start(){var l,t,e,c=new AudioContext,o=c.currentTime,i=132;l=new TinyMusic.Sequence(c,i,["G4  q","D4  e","D4  e","-   e","F4  q","F4  q","G4  e","E4  q","E4  q","-   q","A4  q","-   qh","G4   e","G4   e","-   e","-   e","-   h"]),t=new TinyMusic.Sequence(c,i,["G3  h","C4  e","-   qe","-  h","-   w","-   e","A4  q","-   eh","-   q","D4  q"]),e=new TinyMusic.Sequence(c,i,["C3  e","C3  e","E3  e","G3  e","-   h","A2  e","A2  e","C3  e","E3  e","-   h","D3  e","D3  e","F3  e","A3  e","-   h","G2  e","B2  e","G2  s","D3  e","-   s","G2  e","B2  e","G2  s","G3  e","-   s"]),l.staccato=.55,t.staccato=.1,t.smoothing=.4,e.staccato=.5,l.gain.gain.value=.025,t.gain.gain.value=.0125,e.gain.gain.value=.025,l.mid.frequency.value=800,l.mid.gain.value=-10,e.mid.frequency.value=1200,e.mid.gain.value=-10,e.bass.gain.value=-7,e.bass.frequency.value=80,e.mid.gain.value=-16,e.mid.frequency.value=500,e.treble.gain.value=-12,e.treble.frequency.value=1400,l.play(o+60/i*16),t.play(o+60/i*14),e.play(o)}function process(){if(ctx.fillStyle="#EEEEEE",ctx.fillRect(0,0,800,600),msg.show)kb.menu&&(msg.show=!1,kb.menu=!1,skip_lvl(1));else if(game.in_menu)kb.menu?(game.in_menu=!1,kb.menu=!1):kb.skipNext?(game.in_menu=!1,kb.skipNext=!1,skip_lvl(1)):kb.skipPrev&&(game.in_menu=!1,kb.skipPrev=!1,skip_lvl(-1));else if(kb.rst)reload_level();else if(0===pl.s)kb.u?(pl.d=0,player_move()):kb.d?(pl.d=2,player_move()):kb.l?(pl.d=3,player_move()):kb.r?(pl.d=1,player_move()):kb.menu?(game.in_menu=!0,kb.menu=!1):kb.skipNext?(kb.skipNext=!1,skip_lvl(1)):kb.skipPrev&&(kb.skipPrev=!1,skip_lvl(-1));else if(1===pl.s){let l=32/30*5;if(pl.t-=l,pl.t>0){0===pl.d&&(pl.dy-=l),1===pl.d&&(pl.dx+=l),2===pl.d&&(pl.dy+=l),3===pl.d&&(pl.dx-=l);for(let t=0;t<pl.o.length;t++)0===pl.d&&(pl.o[t].dy-=l),1===pl.d&&(pl.o[t].dx+=l),2===pl.d&&(pl.o[t].dy+=l),3===pl.d&&(pl.o[t].dx-=l)}else{pl.dx=0,pl.dy=0,0===pl.d&&(pl.y-=1),1===pl.d&&(pl.x+=1),2===pl.d&&(pl.y+=1),3===pl.d&&(pl.x-=1);let l=0;for(let t=0;t<pl.o.length-1;t++){0===pl.d&&(pl.o[t].y-=1),1===pl.d&&(pl.o[t].x+=1),2===pl.d&&(pl.o[t].y+=1),3===pl.d&&(pl.o[t].x-=1),pl.o[t].dx=0,pl.o[t].dy=0;let e=get_chip_pwr(pl.o[t]);-1===e?l=-1:1===e&&-1!==l&&(l=1)}if(pl.o.length>0){let t=pl.o[pl.o.length-1],e=t.x,c=t.y;0===pl.d&&(c-=1),1===pl.d&&(e+=1),2===pl.d&&(c+=1),3===pl.d&&(e-=1);let o=get_item(e,c);null!==o&&cpu_merge[o.t]&&(ok_snd.play(),t.t=cpu_merge[o.t],o.x=-1),t.x=e,t.y=c,t.dx=0,t.dy=0;let i=get_chip_pwr(t);-1===i?l=-1:1===i&&-1!==l&&(l=1),-1===l&&no_snd.play(),1===l&&ok_snd.play(),check_win_level()&&(msg.show=!0)}pl.s=0}}else if(2===pl.s){let l=3.2;pl.t-=l,pl.t<=0&&(pl.dx=0,pl.dy=0,pl.s=0)}let l=800/(32*lvl.x),t=600/(32*lvl.y),e=l<t?l:t;for(let l=0;l<lvl.x;l++)for(let t=0;t<lvl.y;t++){let c=get_floor(l,t);"-"===c&&draw_wall(32*l*e,32*t*e,e),"0"===c&&draw_floor(32*l*e,32*t*e,e),["A","B","C","D","E","F","G","H","I","J"].includes(c)&&draw_socket(32*l*e,32*t*e,e,c)}for(let l=0;l<cp.length;l++)draw_chip(32*cp[l].x*e+cp[l].dx*e,32*cp[l].y*e+cp[l].dy*e,e,cp[l].t,get_chip_pwr_color(cp[l]));if(1===pl.s?pl.o.length>0?draw_player_push(32*pl.x*e+pl.dx*e,32*pl.y*e+pl.dy*e,e,pl.d,pl.t):draw_player_walk(32*pl.x*e+pl.dx*e,32*pl.y*e+pl.dy*e,e,pl.d,pl.t):draw_player_idle(32*pl.x*e+pl.dx*e,32*pl.y*e+pl.dy*e,e,pl.d),msg.show)ctx.fillStyle="#EEEEEE",ctx.strokeStyle="#111111",draw_box(100,200,600,200),ctx.fillStyle="#222222",ctx.font="italic bold 50px Arial Black",ctx.fillText("You won!",250,300,300),ctx.fillStyle="#222222",ctx.font="italic bold 20px Arial Black",ctx.fillText("Move count: "+String(lvl.mc),300,375,300);else if(game.in_menu){ctx.fillStyle="#EEEEEE",ctx.strokeStyle="#111111",draw_box(200,50,400,450),ctx.fillStyle="#222222",ctx.font="italic bold 20px Arial Black",ctx.fillText("Level: "+String(ln+1),350,325,300),ctx.drawImage(logo,300,75);for(let l=0;l<game.menu.length;l++)ctx.fillStyle="#EEEEEE",ctx.strokeStyle="#111111",draw_box(game.menu[l].x,game.menu[l].y,100,50),ctx.fillStyle="#222222",ctx.font="bold 30px Verdana",ctx.fillText(game.menu[l].text,game.menu[l].x,game.menu[l].y+25,100)}}function reload_level(){load_level(lvl.l)}function load_level(l){lvl.x=0,lvl.y=0,lvl.l=l,lvl.mc=0,fl={},sk=[],cp=[],pl={};for(let t=0;t<l.length;t++)for(let e=0;e<l[t].length;e++)["0","A","B","C","D","E","F","G","H","I","J"].includes(l[t][e])?(add_floor(e+1,t+1,l[t][e]),"0"!=l[t][e]&&sk.push({x:e+1,y:t+1,t:l[t][e]})):["1","2","3","4","5","6","7","8","9","X"].includes(l[t][e])?(add_floor(e+1,t+1,"0"),cp.push({x:e+1,y:t+1,dx:0,dy:0,t:l[t][e]})):"K"===l[t][e]?(add_floor(e+1,t+1,"B"),sk.push({x:e+1,y:t+1,t:"B"}),cp.push({x:e+1,y:t+1,dx:0,dy:0,t:"1"})):"P"===l[t][e]&&(pl.x=e+1,pl.y=t+1,pl.d=2,pl.dx=0,pl.dy=0,pl.s=0,add_floor(e+1,t+1,"0"))}function skip_lvl(l){ln+=l,(ln>=lvls.length||ln<0)&&(ln=0),load_level(lvls[ln])}function add_floor(l,t,e){fl[l]||(fl[l]={}),fl[l][t]=e,l+2>lvl.x&&(lvl.x=l+2),t+2>lvl.y&&(lvl.y=t+2)}function get_floor(l,t){return fl[l]&&fl[l][t]?fl[l][t]:"-"}function get_item(l,t){for(let e=0;e<cp.length;e++)if(cp[e].x===l&&cp[e].y===t)return cp[e];return null}function player_move(){lvl.mc+=1,can_walk()?(pl.s=1,pl.t=32,pl.o=get_obj_pushed()):(no_snd.play(),pl.s=2,pl.t=16)}function can_walk(){let l=!1,t=!0,e=1,c=null;for(;t;){let o;if(0===pl.d?o=get_floor(pl.x,pl.y-e):1===pl.d?o=get_floor(pl.x+e,pl.y):2===pl.d?o=get_floor(pl.x,pl.y+e):3===pl.d&&(o=get_floor(pl.x-e,pl.y)),"-"===o)l=!1,t=!1;else{let i;0===pl.d?i=get_item(pl.x,pl.y-e):1===pl.d?i=get_item(pl.x+e,pl.y):2===pl.d?i=get_item(pl.x,pl.y+e):3===pl.d&&(i=get_item(pl.x-e,pl.y)),i?(i.t===c&&"0"===o&&(l=!0,t=!1),c=i.t):(l=!0,t=!1)}e++}return l}function get_obj_pushed(){let l=[],t=!0,e=1,c=null;for(;t;){let o;if(0===pl.d?o=get_floor(pl.x,pl.y-e):1===pl.d?o=get_floor(pl.x+e,pl.y):2===pl.d?o=get_floor(pl.x,pl.y+e):3===pl.d&&(o=get_floor(pl.x-e,pl.y)),"-"===o)t=!1,l=[];else{let i;0===pl.d?i=get_item(pl.x,pl.y-e):1===pl.d?i=get_item(pl.x+e,pl.y):2===pl.d?i=get_item(pl.x,pl.y+e):3===pl.d&&(i=get_item(pl.x-e,pl.y)),i?(i.t===c&&"0"===o?t=!1:l.push(i),c=i.t):t=!1}e++}return l}function check_win_level(){for(let l=0;l<sk.length;l++){let t=get_item(sk[l].x,sk[l].y);if(!t||1!==get_socket_pwr(sk[l].t,t))return!1}return!0}function get_chip_pwr(l){return get_socket_pwr(get_floor(l.x,l.y),l)}function get_socket_pwr(l,t){return"0"===l||0!=t.dx||0!=t.dy?0:0===t.dx&&0===t.dy&&cpu_nrg[t.t]?cpu_nrg[t.t].includes(l)?1:-1:0}function get_chip_pwr_color(l){switch(get_chip_pwr(l)){case-1:return"#FF0000";case 0:return"#2222CC";case 1:return"#FFFF88"}}function draw_box(l,t,e,c){bp(),ctx.moveTo(l,t),lt(l+e,t),lt(l+e,t+c),lt(l,t+c),lt(l,t),ctx.fill(),ctx.stroke()}function draw_v(l,t,e,c){bp(),ctx.moveTo(l,t),lt(l+e,t+16*c),lt(l+e+2*c,t+16*c),lt(l+2*e+2*c,t),lt(l+2*e,t),lt(l+e+c,t+14*c),lt(l+2*c,t),ctx.fill()}function draw_floor(l,t,e){ctx.fillStyle="#FFFFFF",ctx.strokeStyle="#111111",fill_tile(l,t,e)}function draw_wall(l,t,e){ctx.fillStyle="#FFFFFF",ctx.strokeStyle="#111111",fill_tile(l,t,e);for(let c=1;c<=3;c++)bp(),ctx.moveTo(l,t+8*c*e),lt(l+32*e,t+8*c*e),ctx.stroke();for(let c=0;c<2;c++)bp(),ctx.moveTo(l+11*e,t+16*e*c),lt(l+11*e,t+8*e+16*e*c),ctx.stroke(),bp(),ctx.moveTo(l+22*e,t+8*e+16*e*c),lt(l+22*e,t+16*e+16*e*c),ctx.stroke()}function draw_chip(l,t,e,c,o){switch(ctx.fillStyle="#222222",ctx.strokeStyle="#222222",draw_chip_shape(l,t,e),ctx.fillStyle=o,c){case"3":ctx.fillRect(l+9*e,t+8*e,2*e,16*e),ctx.fillRect(l+21*e,t+8*e,2*e,16*e);case"1":ctx.fillRect(l+15*e,t+8*e,2*e,16*e);break;case"2":ctx.fillRect(l+12*e,t+8*e,2*e,16*e),ctx.fillRect(l+18*e,t+8*e,2*e,16*e);break;case"4":ctx.fillRect(l+9*e,t+8*e,2*e,16*e),draw_v(l+13*e,t+8*e,4*e,e);break;case"5":draw_v(l+9*e,t+8*e,6*e,e);break;case"6":ctx.fillRect(l+21*e,t+8*e,2*e,16*e),draw_v(l+9*e,t+8*e,4*e,e);break;case"7":draw_v(l+9*e,t+8*e,4*e,e),ctx.fillRect(l+18*e,t+8*e,2*e,16*e),ctx.fillRect(l+22*e,t+8*e,2*e,16*e);break;case"8":draw_v(l+7*e,t+8*e,3*e,e),ctx.fillRect(l+16*e,t+8*e,2*e,16*e),ctx.fillRect(l+19*e,t+8*e,2*e,16*e),ctx.fillRect(l+22*e,t+8*e,2*e,16*e);break;case"9":ctx.fillRect(l+9*e,t+8*e,2*e,16*e),bp(),ctx.moveTo(l+13*e,t+8*e),lt(l+21*e,t+24*e),lt(l+23*e,t+24*e),lt(l+15*e,t+8*e),ctx.fill(),bp(),ctx.moveTo(l+13*e,t+24*e),lt(l+21*e,t+8*e),lt(l+23*e,t+8*e),lt(l+15*e,t+24*e),ctx.fill();break;case"X":bp(),ctx.moveTo(l+9*e,t+8*e),lt(l+19*e,t+24*e),lt(l+23*e,t+24*e),lt(l+13*e,t+8*e),ctx.fill(),bp(),ctx.moveTo(l+9*e,t+24*e),lt(l+19*e,t+8*e),lt(l+23*e,t+8*e),lt(l+13*e,t+24*e),ctx.fill();break}}function draw_socket(l,t,e,c){ctx.fillStyle="#444444",ctx.strokeStyle="#111111",bp(),fill_tile(l,t,e),ctx.fillStyle="#FFFFFF",draw_chip_shape(l,t,e),ctx.fillStyle="#AAAAAA",["A","C","E","G","I"].includes(c)&&draw_dot(l+16*e,t+16*e,e),["B","C","D","E","F","G","H","I"].includes(c)&&draw_dot(l+10*e,t+10*e,e),["B","C","D","E","F","G","H","I"].includes(c)&&draw_dot(l+22*e,t+22*e,e),["D","E","F","G","H","I"].includes(c)&&draw_dot(l+10*e,t+22*e,e),["D","E","F","G","H","I"].includes(c)&&draw_dot(l+22*e,t+10*e,e),["F","G","H","I"].includes(c)&&draw_dot(l+10*e,t+16*e,e),["F","G","H","I"].includes(c)&&draw_dot(l+22*e,t+16*e,e),["H","I"].includes(c)&&draw_dot(l+16*e,t+10*e,e),["H","I"].includes(c)&&draw_dot(l+16*e,t+22*e,e),"J"===c&&(bp(),ctx.moveTo(l+9*e,t+8*e),lt(l+19*e,t+24*e),lt(l+23*e,t+24*e),lt(l+13*e,t+8*e),ctx.fill(),bp(),ctx.moveTo(l+9*e,t+24*e),lt(l+19*e,t+8*e),lt(l+23*e,t+8*e),lt(l+13*e,t+24*e),ctx.fill())}function draw_dot(l,t,e){bp(),ctx.arc(l,t,2.5*e,0,2*Math.PI),ctx.fill()}function fill_tile(l,t,e){e||(e=1),draw_box(l,t,32*e,32*e)}function draw_chip_shape(l,t,e){e||(e=1),bp(),ctx.moveTo(l+5*e,t+5*e),lt(l+27*e,t+5*e),lt(l+27*e,t+27*e),lt(l+5*e,t+27*e),ctx.fill();for(let c=0;c<7;c++)bp(),ctx.moveTo(l+6*e+3*c*e,t+30*e),lt(l+6*e+3*c*e,t+2*e),lt(l+7*e+3*c*e,t+2*e),lt(l+7*e+3*c*e,t+30*e),ctx.fill(),bp(),ctx.moveTo(l+30*e,t+6*e+3*c*e),lt(l+2*e,t+6*e+3*c*e),lt(l+2*e,t+7*e+3*c*e),lt(l+30*e,t+7*e+3*c*e),ctx.fill()}function draw_player_idle(l,t,e,c){e||(e=1);let o=l+16*e,i=t+16*e;if(0==c||2==c)ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(o-9*e,i-2*e),qc(o-14*e,i,o-14*e,i+8*e),qc(o-12*e,i+10*e,o-10*e,i+8*e),lt(o-10*e,i+4*e),lt(o-9*e,i+7*e),lt(o+9*e,i+7*e),lt(o+10*e,i+4*e),lt(o+10*e,i+8*e),qc(o+12*e,i+10*e,o+14*e,i+8*e),qc(o+14*e,i,o+9*e,i-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.moveTo(o-9*e,i-2*e),qc(o-14*e,i-8*e,o-7*e,i-14*e),qc(o,i-16*e,o+7*e,i-14*e),qc(o+14*e,i-8*e,o+9*e,i-2*e),qc(o,i,o-9*e,i-2*e),ctx.stroke(),2==c?(ctx.fill(),ctx.fillStyle="#000000"):(ctx.fillStyle="#000000",ctx.fill()),bp(),ctx.moveTo(o-9*e,i+7*e),lt(o-7*e,i+14*e),qc(o-5*e,i+16*e,o-3*e,i+14*e),lt(o,i+10*e),lt(o+3*e,i+14*e),qc(o+5*e,i+16*e,o+7*e,i+14*e),lt(o+9*e,i+7*e),lt(o-9*e,i+7*e),ctx.stroke(),ctx.fill(),2==c&&(bp(),ctx.moveTo(o-7*e,i-14*e),qc(o,i-16*e,o+7*e,i-14*e),qc(o,i-11*e,o-7*e,i-14*e),ctx.fill(),bp(),ctx.arc(o-6*e,i-8*e,2*e,0,2*Math.PI),ctx.fill(),bp(),ctx.arc(o+6*e,i-8*e,2*e,0,2*Math.PI),ctx.fill());else{let l=1==c?1:-1;ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(o-7*e,i-2*e),lt(o-5*e,i+7*e),lt(o+5*e,i+7*e),lt(o+7*e,i-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.moveTo(o-7*e,i-2*e),qc(o-10*e,i-8*e,o-7*e,i-14*e),qc(o,i-16*e,o+7*e,i-14*e),qc(o+10*e,i-8*e,o+7*e,i-2*e),qc(o,i,o-7*e,i-2*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#000000",bp(),ctx.moveTo(o-7*e*l,i-2*e),qc(o-10*e*l,i-8*e,o-7*e*l,i-14*e),qc(o,i-16*e,o+7*e*l,i-14*e),qc(o+1*e*l,i-10*e,o-5*e*l,i-12*e),qc(o-5*e*l,i-5*e,o-7*e*l,i-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.arc(o+4*e*l,i-8*e,2*e,0,2*Math.PI),ctx.fill(),bp(),ctx.moveTo(o-5*e,i+7*e),lt(o-2*e,i+14*e),qc(o,i+16*e,o+2*e,i+14*e),lt(o+5*e,i+7*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(o-2*e,i+4*e),lt(o-2*e,i+8*e),qc(o,i+10*e,o+2*e,i+8*e),lt(o+2*e,i+4*e),ctx.stroke(),ctx.fill()}}function draw_player_push(l,t,e,c,o){e||(e=1);let i=l+16*e,p=t+16*e;if(0==c||2==c)draw_player_idle(l,t,e,c);else{let l=1==c?1:-1;ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(i-7*e,p-2*e),lt(i-5*e,p+7*e),lt(i+5*e,p+7*e),lt(i+7*e,p-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.moveTo(i-7*e,p-2*e),qc(i-10*e,p-8*e,i-7*e,p-14*e),qc(i,p-16*e,i+7*e,p-14*e),qc(i+10*e,p-8*e,i+7*e,p-2*e),qc(i,p,i-7*e,p-2*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#000000",bp(),ctx.moveTo(i-7*e*l,p-2*e),qc(i-10*e*l,p-8*e,i-7*e*l,p-14*e),qc(i,p-16*e,i+7*e*l,p-14*e),qc(i+1*e*l,p-10*e,i-5*e*l,p-12*e),qc(i-5*e*l,p-5*e,i-7*e*l,p-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.arc(i+4*e*l,p-8*e,2*e,0,2*Math.PI),ctx.fill(),bp(),ctx.moveTo(i-5*e*l,p+7*e),lt(i-7*e*l,p+13*e),qc(i-5*e*l,p+15*e,i-3*e*l,p+13*e),lt(i,p+10*e),lt(i+3*e*l,p+13*e),qc(i+5*e*l,p+15*e,i+7*e*l,p+13*e),lt(i+5*e*l,p+7*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(i,p),lt(i+14*e*l,p),qc(i+16*e*l,p+2*e,i+14*e*l,p+4*e),lt(i,p+4*e),ctx.stroke(),ctx.fill()}}function draw_player_walk(l,t,e,c,o){e||(e=1);let i=Math.floor(o)/3%4;if(1===i||3===i)return void draw_player_idle(l,t,e,c);let p=l+16*e,n=t+17*e;if(0==c||2==c){let l=0===i?1:-1;ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(p-9*e*l,n-2*e),qc(p-14*e*l,n,p-14*e*l,n+6*e),qc(p-12*e*l,n+8*e,p-10*e*l,n+6*e),lt(p-10*e*l,n+4*e),lt(p-9*e*l,n+7*e),lt(p+9*e*l,n+7*e),lt(p+10*e*l,n+4*e),lt(p+10*e*l,n+10*e),qc(p+12*e*l,n+12*e,p+14*e*l,n+10*e),qc(p+14*e*l,n,p+9*e*l,n-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.moveTo(p-9*e,n-2*e),qc(p-14*e,n-8*e,p-7*e,n-14*e),qc(p,n-16*e,p+7*e,n-14*e),qc(p+14*e,n-8*e,p+9*e,n-2*e),qc(p,n,p-9*e,n-2*e),ctx.stroke(),2==c?(ctx.fill(),ctx.fillStyle="#000000"):(ctx.fillStyle="#000000",ctx.fill()),bp(),ctx.moveTo(p-9*e*l,n+7*e),lt(p-7*e*l,n+14*e),qc(p-5*e*l,n+16*e,p-3*e*l,n+14*e),lt(p,n+10*e),lt(p+3*e*l,n+12*e),qc(p+5*e*l,n+14*e,p+7*e*l,n+12*e),lt(p+9*e*l,n+7*e),lt(p-9*e*l,n+7*e),ctx.stroke(),ctx.fill(),2==c&&(bp(),ctx.moveTo(p-7*e,n-14*e),qc(p,n-16*e,p+7*e,n-14*e),qc(p,n-11*e,p-7*e,n-14*e),ctx.fill(),bp(),ctx.arc(p-6*e,n-8*e,2*e,0,2*Math.PI),ctx.fill(),bp(),ctx.arc(p+6*e,n-8*e,2*e,0,2*Math.PI),ctx.fill())}else{let l=1==c?1:-1;ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(p-7*e,n-2*e),lt(p-5*e,n+7*e),lt(p+5*e,n+7*e),lt(p+7*e,n-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.moveTo(p-7*e,n-2*e),qc(p-10*e,n-8*e,p-7*e,n-14*e),qc(p,n-16*e,p+7*e,n-14*e),qc(p+10*e,n-8*e,p+7*e,n-2*e),qc(p,n,p-7*e,n-2*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#000000",bp(),ctx.moveTo(p-7*e*l,n-2*e),qc(p-10*e*l,n-8*e,p-7*e*l,n-14*e),qc(p,n-16*e,p+7*e*l,n-14*e),qc(p+1*e*l,n-10*e,p-5*e*l,n-12*e),qc(p-5*e*l,n-5*e,p-7*e*l,n-2*e),ctx.stroke(),ctx.fill(),bp(),ctx.arc(p+4*e*l,n-8*e,2*e,0,2*Math.PI),ctx.fill(),bp(),ctx.moveTo(p-5*e*l,n+7*e),lt(p-7*e*l,n+13*e),qc(p-5*e*l,n+15*e,p-3*e*l,n+13*e),lt(p,n+10*e),lt(p+3*e*l,n+13*e),qc(p+5*e*l,n+15*e,p+7*e*l,n+13*e),lt(p+5*e*l,n+7*e),ctx.stroke(),ctx.fill(),ctx.fillStyle="#FFFFFF",bp(),ctx.moveTo(p-2*e,n+4*e),lt(p-2*e,n+8*e),qc(p,n+10*e,p+2*e,n+8*e),lt(p+2*e,n+4*e),ctx.stroke(),ctx.fill()}}function bp(){ctx.beginPath()}function lt(l,t){ctx.lineTo(l,t)}function qc(l,t,e,c){ctx.quadraticCurveTo(l,t,e,c)}window.addEventListener("load",page_load,!1);