<!DOCTYPE html><html><head><meta charset="utf-8"><title>CPU Balance</title><script>!function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):"object"==typeof exports&&"string"!=typeof exports.nodeName?e(exports):e(t.TinyMusic={})}(this,(function(t){var e=440*Math.pow(Math.pow(2,1/12),-9),s=/^[0-9.]+$/,i=/\s+/,o=/(\d+)/,n={};function r(t){var e=t.split(i);this.frequency=r.getFrequency(e[0])||0,this.duration=r.getDuration(e[1])||0}function c(t,e,s){this.ac=t||new AudioContext,this.createFxNodes(),this.tempo=e||120,this.loop=!0,this.smoothing=0,this.staccato=0,this.notes=[],this.push.apply(this,s||[])}"B#-C|C#-Db|D|D#-Eb|E-Fb|E#-F|F#-Gb|G|G#-Ab|A|A#-Bb|B-Cb".split("|").forEach((function(t,e){t.split("-").forEach((function(t){n[t]=e}))})),r.getFrequency=function(t){var s=t.split(o),i=n[s[0]],r=(s[1]||4)-4;return e*Math.pow(Math.pow(2,1/12),i)*Math.pow(2,r)},r.getDuration=function(t){return s.test(t)?parseFloat(t):t.toLowerCase().split("").reduce((function(t,e){return t+("w"===e?4:"h"===e?2:"q"===e?1:"e"===e?.5:"s"===e?.25:0)}),0)},c.prototype.createFxNodes=function(){var t=this.gain=this.ac.createGain();return[["bass",100],["mid",1e3],["treble",2500]].forEach(function(e,s){(s=this[e[0]]=this.ac.createBiquadFilter()).type="peaking",s.frequency.value=e[1],t.connect(t=s)}.bind(this)),t.connect(this.ac.destination),this},c.prototype.push=function(){return Array.prototype.forEach.call(arguments,function(t){this.notes.push(t instanceof r?t:new r(t))}.bind(this)),this},c.prototype.createCustomWave=function(t,e){e||(e=t),this.waveType="custom",this.customWave=[new Float32Array(t),new Float32Array(e)]},c.prototype.createOscillator=function(){return this.stop(),this.osc=this.ac.createOscillator(),this.customWave?this.osc.setPeriodicWave(this.ac.createPeriodicWave.apply(this.ac,this.customWave)):this.osc.type=this.waveType||"square",this.osc.connect(this.gain),this},c.prototype.scheduleNote=function(t,e){var s=60/this.tempo*this.notes[t].duration,i=s*(1-(this.staccato||0));return this.setFrequency(this.notes[t].frequency,e),this.smoothing&&this.notes[t].frequency&&this.slide(t,e,i),this.setFrequency(0,e+i),e+s},c.prototype.getNextNote=function(t){return this.notes[t<this.notes.length-1?t+1:0]},c.prototype.getSlideStartDelay=function(t){return t-Math.min(t,60/this.tempo*this.smoothing)},c.prototype.slide=function(t,e,s){var i=this.getNextNote(t),o=this.getSlideStartDelay(s);return this.setFrequency(this.notes[t].frequency,e+o),this.rampFrequency(i.frequency,e+s),this},c.prototype.setFrequency=function(t,e){return this.osc.frequency.setValueAtTime(t,e),this},c.prototype.rampFrequency=function(t,e){return this.osc.frequency.linearRampToValueAtTime(t,e),this},c.prototype.play=function(t){return t="number"==typeof t?t:this.ac.currentTime,this.createOscillator(),this.osc.start(t),this.notes.forEach(function(e,s){t=this.scheduleNote(s,t)}.bind(this)),this.osc.stop(t),this.osc.onended=this.loop?this.play.bind(this,t):null,this},c.prototype.stop=function(){return this.osc&&(this.osc.onended=null,this.osc.disconnect(),this.osc=null),this},t.Note=r,t.Sequence=c}));var sequence1,sequence2,sequence3,ac=new AudioContext,when=ac.currentTime,tempo=132,lead=["- e","Bb3 e","A3 e","Bb3 e","G3 e","A3 e","F3 e","G3 e","E3 e","F3 e","G3 e","F3 e","E3 e","F3 e","D3 q","- e","Bb3 s","A3 s","Bb3 e","G3 e","A3 e","G3 e","F3 e","G3 e","E3 e","F3 e","G3 e","F3 e","E3 s","F3 s","E3 e","D3 q"],harmony=["- e","D4 e","C4 e","D4 e","Bb3 e","C4 e","A3 e","Bb3 e","G3 e","A3 e","Bb3 e","A3 e","G3 e","A3 e","F3 q","- e","D4 s","C4 s","D4 e","Bb3 e","C4 e","Bb3 e","A3 e","Bb3 e","G3 e","A3 e","Bb3 e","A3 e","G3 s","A3 s","G3 e","F3 q"],bass=["D3 q","- h","D3 q","A2 q","- h","A2 q","Bb2 q","- h","Bb2 q","F2 h","A2 h"];let ctx;function page_load(){let e=document.getElementById("cnv");ctx=e.getContext("2d");setInterval(process,30);sequence1=new TinyMusic.Sequence(ac,tempo,lead),sequence2=new TinyMusic.Sequence(ac,tempo,harmony),sequence3=new TinyMusic.Sequence(ac,tempo,bass),sequence1.staccato=.55,sequence2.staccato=.55,sequence3.staccato=.05,sequence3.smoothing=.4,sequence1.gain.gain.value=.25,sequence2.gain.gain.value=.2,sequence3.gain.gain.value=.1875,sequence1.mid.frequency.value=800,sequence1.mid.gain.value=-10,sequence2.mid.frequency.value=1200,sequence3.mid.gain.value=-10,sequence3.bass.gain.value=-7,sequence3.bass.frequency.value=80,sequence3.mid.gain.value=-16,sequence3.mid.frequency.value=500,sequence3.treble.gain.value=-12,sequence3.treble.frequency.value=1400,sequence1.play(when),sequence2.play(when+60/tempo*16),sequence3.play(when)}function process(e){ctx.fillStyle="#EEEEEE",ctx.fillRect(0,0,800,600),draw_floor(300,300),draw_floor(300,332),draw_wall(332,300),draw_wall(332,332),draw_wall(364,300),draw_wall(396,300)}function draw_floor(e,c){ctx.fillStyle="#FFFFFF",ctx.strokeStyle="#111111",ctx.beginPath(),ctx.moveTo(e,c),ctx.lineTo(e+32,c),ctx.lineTo(e+32,c+32),ctx.lineTo(e,c+32),ctx.lineTo(e,c),ctx.fill(),ctx.stroke()}function draw_wall(e,c){ctx.fillStyle="#FFFFFF",ctx.strokeStyle="#111111",ctx.beginPath(),ctx.moveTo(e,c),ctx.lineTo(e+32,c),ctx.lineTo(e+32,c+32),ctx.lineTo(e,c+32),ctx.lineTo(e,c),ctx.fill(),ctx.stroke(),ctx.beginPath(),ctx.moveTo(e,c+16),ctx.lineTo(e+32,c+16),ctx.stroke(),ctx.beginPath(),ctx.moveTo(e+11,c),ctx.lineTo(e+11,c+16),ctx.stroke(),ctx.beginPath(),ctx.moveTo(e+22,c+16),ctx.lineTo(e+22,c+32),ctx.stroke()}window.addEventListener("load",page_load,!1);</script></head><body><canvas id="cnv" width="800" height="600"></canvas></body></html>